#
# Created by scaled
#

@name autoperf

P2F["autoperf", string] = "autoperf"

function autoperf() {
    if (P:exists("lastRun")) {
        local DeltaTime = max(tickInterval(), systime() - P["lastRun", number])
        
        if (DeltaTime < 0.0667) {
            KPerf = max(KPerf - 1, 2)
        }
        elseif (DeltaTime > 0.0667) {
            KPerf = min(KPerf + 1, 100 - min(Overload, 50))
        }
    }
    P["lastRun", number] = systime()
}
