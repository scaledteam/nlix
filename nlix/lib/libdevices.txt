#
# Created by scaled
#

@name libdevices

function number deviceGet(Type:string) {
    if (S["devices", table]:exists(Type) & (!P:exists("device") | P["device", wirelink] == nowirelink())) {
        local Devices = S["devices", table][Type, array]
        
        while (Devices:count() > 0) {
            local Device = Devices:shiftWirelink()
            if (Device != nowirelink()) {
                P["device", wirelink] = Device
                S["devices", table]["P", table]:pushTable(P)
                S["devices", table]["D", table]:pushWirelink(Device)
                return 1
            }
        }
    }
    return 0
}
